if (self.CavalryLogger) { CavalryLogger.start_js(["WRavX"]); }

__d("PagesMessagingConst",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={LOAD_MESSAGE_THREAD_URI:"\/ajax\/pages\/messages\/load_message_thread.php",UNANSWERED_FILTER:"unanswered"};}),null);
__d('PagesMessengerThreadDialogLink.react',['AsyncDialog','AsyncRequest','Link.react','MessageThreadViewSource','PagesMessagingConst','ReactComponentWithPureRenderMixin','React','URI'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'PagesMessengerThreadDialogLink',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{threadID:h.string.isRequired,viewer:h.string.isRequired,folder:h.string},getInitialState:function j(){return {permalinkURI:'#'};},componentDidMount:function j(){this._getPermalinkURI(this.props);},componentWillReceiveProps:function j(k){if(k.threadID!==this.props.threadID||k.folder!==this.props.folder)this._getPermalinkURI(k);},render:function j(){return (c('React').createElement(c('Link.react'),{className:this.props.className,href:'#',onClick:this._handleClick,role:'button'},this.props.children));},_handleClick:function j(k){k.preventDefault();c('AsyncDialog').send(new (c('AsyncRequest'))(this.state.permalinkURI).setRelativeTo(k.target));},_getPermalinkURI:function j(k){this.setState(this.getInitialState());var l=k.threadID,m=k.viewer,n=k.folder;e(['MercuryThreadIDMap'],function(o){var p=o.getForFBID(m);p.getServerIDFromClientID(l,function(q){this.isMounted()&&this.setState({permalinkURI:new (c('URI'))(c('PagesMessagingConst').LOAD_MESSAGE_THREAD_URI).setQueryData({pageid:m,threadid:l,threadElementID:q,folder:n,source:c('MessageThreadViewSource').REFRESH_HIGHLANDER_JEWEL}).toString()});}.bind(this));}.bind(this));}});f.exports=i;}),null);
__d('MercuryJewelCountControl',['Arbiter','MercuryDispatcher','MercuryThreadInformer','MercuryUnseenState','UserActivity','isInFocusMode'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';var j=c('MercuryDispatcher').get(),k=c('MercuryThreadInformer').get();this.$MercuryJewelCountControl2=c('MercuryUnseenState').get();this.render();j.subscribe('model-update-completed',function(l,m){this.$MercuryJewelCountControl3(false);}.bind(this));k.subscribe('unseen-updated',function(){return this.render();}.bind(this));this.$MercuryJewelCountControl1=i;this.$MercuryJewelCountControl1.subscribe('marked-seen',function(){this.$MercuryJewelCountControl3(true);}.bind(this));}h.prototype.render=function(){'use strict';var i=c('isInFocusMode')()?0:this.$MercuryJewelCountControl2.getUnseenCount();c('Arbiter').inform('jewel/count-updated',{jewel:'mercurymessages',count:i},c('Arbiter').BEHAVIOR_STATE);};h.prototype.$MercuryJewelCountControl3=function(i){'use strict';if(i||this.$MercuryJewelCountControl1.isOpen()&&c('UserActivity').isActive())this.$MercuryJewelCountControl2.markAsSeen();};h.constructStores=function(){'use strict';c('MercuryUnseenState').get();};f.exports=h;}),null);
__d('MercuryPresenceIndicator.react',['cx','fbt','Arbiter','AvailableListConstants','MercuryIDs','PresenceStatus','React','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MercuryPresenceIndicator2=function(){if(!c('MercuryIDs').isCanonical(this.props.threadID)){return null;}else{var s=c('MercuryIDs').getUserIDFromThreadID(this.props.threadID);return c('PresenceStatus').get(s);}}.bind(this),this.$MercuryPresenceIndicator3=function(s){return "presenceIndicator"+(c('MercuryIDs').isGroupChat(this.props.threadID)?' '+"groupThread":'')+(s==c('AvailableListConstants').ACTIVE?' '+"presenceActive":'');}.bind(this),this.$MercuryPresenceIndicator4=function(s){switch(s){case c('AvailableListConstants').ACTIVE:return i._("\u0410\u043a\u0442\u0438\u0432\u0435\u043d");default:return null;}},o;}m.prototype.componentDidMount=function(){this.$MercuryPresenceIndicator1=new (c('SubscriptionsHandler'))();this.$MercuryPresenceIndicator1.addSubscriptions(c('Arbiter').subscribe(c('AvailableListConstants').ON_AVAILABILITY_CHANGED,function(){return this.forceUpdate();}.bind(this)));};m.prototype.componentWillUnmount=function(){this.$MercuryPresenceIndicator1&&this.$MercuryPresenceIndicator1.release();};m.prototype.render=function(){var n=this.$MercuryPresenceIndicator2();return c('React').createElement('span',{className:this.$MercuryPresenceIndicator3(n)},c('React').createElement('span',{className:'accessible_elem'},this.$MercuryPresenceIndicator4(n)));};m.propTypes={threadID:l.string.isRequired};f.exports=m;}),null);
__d('MercuryThreadPermalink.react',['HighlanderFinchGating','Link.react','PagesMessengerThreadDialogLink.react','ReactComponentWithPureRenderMixin','React','WebMessengerThreadPermalinks'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'MercuryThreadPermalink',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{threadID:h.string.isRequired,viewer:h.string.isRequired,folder:h.string,onClick:h.func},getInitialState:function j(){return {permalinkURI:'#'};},componentDidMount:function j(){this._getPermalinkURI(this.props);},componentWillReceiveProps:function j(k){if(k.threadID!==this.props.threadID||k.folder!==this.props.folder)this._getPermalinkURI(k);},render:function j(){if(c('HighlanderFinchGating').HIGHLANDER_FINCH_GATING)return (c('React').createElement(c('PagesMessengerThreadDialogLink.react'),{className:this.props.className,threadID:this.props.threadID,viewer:this.props.viewer,folder:this.props.folder},this.props.children));return (c('React').createElement(c('Link.react'),{className:this.props.className,href:this.state.permalinkURI,onClick:this.props.onClick,role:'button'},this.props.children));},_getPermalinkURI:function j(k){if(c('HighlanderFinchGating').HIGHLANDER_FINCH_GATING)return;this.setState(this.getInitialState());c('WebMessengerThreadPermalinks').getThreadURI(k.threadID,function(l){return this.isMounted()&&this.setState({permalinkURI:l});}.bind(this),k.folder);}});f.exports=i;}),null);
__d('MercuryThreadReadToggle.react',['fbt','invariant','MercuryThreadActions','React','ReadToggle.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MercuryThreadReadToggle1=function(s){if(s){s.preventDefault();s.stopPropagation();}var t=c('MercuryThreadActions').getForFBID(this.props.viewer);this.props.unreadCount>0?t.markRead(this.props.threadID):t.markUnread(this.props.threadID);}.bind(this),o;}m.prototype.render=function(){!(this.props.unreadCount>=0)?i(0):void 0;return c('React').createElement(c('ReadToggle.react'),{isRead:this.props.unreadCount===0,onClick:this.$MercuryThreadReadToggle1,readLabel:h._("\u041e\u0442\u0431\u0435\u043b\u044f\u0437\u0432\u0430\u043d\u0435 \u043a\u0430\u0442\u043e \u043d\u0435\u043f\u0440\u043e\u0447\u0435\u0442\u0435\u043d\u043e"),unreadLabel:h._("\u041e\u0442\u0431\u0435\u043b\u044f\u0437\u0432\u0430\u043d\u0435 \u043a\u0430\u0442\u043e \u043f\u0440\u043e\u0447\u0435\u0442\u0435\u043d\u043e")});};m.propTypes={threadID:l.string.isRequired,viewer:l.string.isRequired,unreadCount:l.number.isRequired};f.exports=m;}),null);
__d('MessagesJewelInlineThumbnail.react',['cx','MercuryAttachmentType','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MessagesJewelInlineThumbnail1=function(){var r=this.props.thread;if(!r.snippet_attachments)return [];return r.snippet_attachments.filter(function(s){return s.attach_type===c('MercuryAttachmentType').PHOTO;});}.bind(this),n;}l.prototype.render=function(){var m=this.$MessagesJewelInlineThumbnail1();if(m.length===0)return c('React').createElement('span',null);var n=m[0].thumbnail_url;if(!n)return c('React').createElement('span',null);var o=c('React').createElement('span',{className:"_56hv"},c('React').createElement('i',{style:{backgroundImage:'url('+n+')'}}));if(m.length>1)o=c('React').createElement('span',null,c('React').createElement('span',{className:"_56hy"}),o);return o;};l.propTypes={thread:k.object.isRequired};f.exports=l;}),null);
__d('MessagesJewelThreadListRow.react',['cx','ImageBlock.react','immutable','ImmutableObject','MercuryPresenceIndicator.react','MercurySeenIndicator.react','MercuryThreadImage.react','MercuryThreadPermalink.react','MercuryThreadReadToggle.react','MercuryThreadSnippet.react','MercuryThreadTimestamp.react','MercuryThreadTitle.react','MercuryTimestamp','MessagesJewelInlineThumbnail.react','MNAdsMessageUtils','React','UserAgent'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MessagesJewelThreadListRow2=function(){if(!this.props.showPresence)return null;return (c('React').createElement(c('MercuryPresenceIndicator.react'),{threadID:this.props.thread.thread_id}));}.bind(this),this.$MessagesJewelThreadListRow3=function(r){return (c('React').createElement(c('MercuryThreadImage.react'),{size:r,thread:this.props.thread,useBackground:true,viewer:this.props.viewer}));}.bind(this),this.$MessagesJewelThreadListRow1=function(){return (c('React').createElement(c('MercuryThreadTitle.react'),{thread:this.props.thread,viewer:this.props.viewer,showUnreadCount:true}));}.bind(this),this.$MessagesJewelThreadListRow5=function(){return (c('React').createElement(c('MercuryThreadSnippet.react'),{participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer}));}.bind(this),this.$MessagesJewelThreadListRow4=function(){return (c('React').createElement(c('MercurySeenIndicator.react'),{thread:this.props.thread,viewer:this.props.viewer}));}.bind(this),this.$MessagesJewelThreadListRow7=function(){return (c('React').createElement(c('MercuryThreadReadToggle.react'),{threadID:this.props.thread.thread_id,viewer:this.props.viewer,unreadCount:this.props.thread.unread_count}));}.bind(this),n;}l.prototype.render=function(){var m=c('UserAgent').isBrowser('Chrome')&&!c('UserAgent').isPlatform('Windows')?c('React').createElement('div',{className:'author fixemoji'},this.$MessagesJewelThreadListRow1(),this.$MessagesJewelThreadListRow2()):c('React').createElement('div',{className:'author'},c('React').createElement('strong',null,this.$MessagesJewelThreadListRow1()),this.$MessagesJewelThreadListRow2()),n=c('React').createElement(c('ImageBlock.react'),{spacing:'medium'},c('React').createElement('div',{className:"MercuryThreadImage _4qeb"},this.$MessagesJewelThreadListRow3()),c('React').createElement('div',{className:'content'},m,c('React').createElement('div',{className:'snippet preview'},this.$MessagesJewelThreadListRow4(),this.$MessagesJewelThreadListRow5()),c('React').createElement('div',{className:'time'},c('MNAdsMessageUtils').isAdsMessageRequest(this.props.thread)?c('MNAdsMessageUtils').renderAdsMessageRequestStatus():this.$MessagesJewelThreadListRow6())),c('React').createElement('div',null,c('React').createElement(c('MessagesJewelInlineThumbnail.react'),{thread:this.props.thread}),c('React').createElement('div',{className:'x_div'},this.$MessagesJewelThreadListRow7())));return c('React').createElement('li',{className:this.props.thread.unread_count>0?"jewelItemNew":''},c('React').createElement(c('MercuryThreadPermalink.react'),{className:'messagesContent',threadID:this.props.thread.thread_id,viewer:this.props.viewer,folder:this.props.thread.folder,onClick:this.props.onClick},n));};l.prototype.$MessagesJewelThreadListRow6=function(){return c('React').createElement(c('MercuryThreadTimestamp.react'),{time:this.props.thread.timestamp,title:c('MercuryTimestamp').getAbsoluteTimestamp(this.props.thread.timestamp),text:c('MercuryTimestamp').getRelativeTimestamp(this.props.thread.timestamp)});};l.propTypes={onClick:k.func,participants:k.instanceOf(c('immutable').Map).isRequired,showPresence:k.bool,thread:k.instanceOf(c('ImmutableObject')).isRequired,viewer:k.string.isRequired,wasSeenByAll:k.bool};f.exports=l;}),null);
__d('MessagesJewelThreadlistRowContainer.react',['ChatOpenTab','ChatOpenTabEventLogger','FantaTabActions','ImmutableObject','MercuryConfig','MercuryDelayedRoger','MercuryThreadlistRowContainer.react','MessagesJewelThreadListRow.react','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('MercuryDelayedRoger').get(),i=c('React').PropTypes,j=c('React').createClass({displayName:'MessagesJewelThreadlistRowContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(h)],propTypes:{thread:i.instanceOf(c('ImmutableObject')).isRequired,viewer:i.string.isRequired},statics:{calculateState:function k(l){return {wasSeenByAll:h.wasSeenByAll(l.thread.thread_id)};}},render:function k(){return (c('React').createElement(c('MercuryThreadlistRowContainer.react'),{ChildClass:c('MessagesJewelThreadListRow.react'),onClick:this._handleClick,showPresence:c('ChatOpenTab').canOpenTab(),thread:this.props.thread,viewer:this.props.viewer,wasSeenByAll:this.state.wasSeenByAll}));},_handleClick:function k(l){if(l.button===1||l.altKey||l.ctrlKey||l.metaKey||l.shiftKey)return;if(!c('ChatOpenTab').canOpenTab())return;l.preventDefault();var m=this.props.thread.thread_id;if(c('MercuryConfig').FantaTabs){c('FantaTabActions').openTab(m);c('ChatOpenTabEventLogger').log('jewel',m);}else c('ChatOpenTab').openThread(m,'jewel');}});f.exports=j;}),null);
__d('MessagesJewelThreadList.react',['cx','fbt','BootloadedComponent.react','ImmutableObject','JewelConstants','JSResource','Link.react','MessagesJewelThreadlistRowContainer.react','MessagingTag','React','ScrollableArea.react','XUISpinner.react','debounce','getViewportDimensions','throttle'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=160,m=450,n=c('React').PropTypes;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.$MessagesJewelThreadList2=function(){return Math.min(c('JewelConstants').FLYOUT_MAX_HEIGHT||m,c('getViewportDimensions')().height-l);},this.$MessagesJewelThreadList6=function(){if(this.props.isLoaded){if(this.props.folder===c('MessagingTag').PENDING)return (c('React').createElement('div',{className:"_16bh _16bi"},c('React').createElement(c('Link.react'),{onClick:this.$MessagesJewelThreadList7},i._("See filtered requests"))));return null;}if(this.props.isLoading)return (c('React').createElement(c('XUISpinner.react'),{className:"jewelLoading"}));return (c('React').createElement('div',{className:"_v8y"},c('React').createElement(c('Link.react'),{href:'#',onClick:this.$MessagesJewelThreadList8},i._("\u041f\u043e\u043a\u0430\u0437\u0432\u0430\u043d\u0435 \u043d\u0430 \u043f\u043e-\u0441\u0442\u0430\u0440\u0438"))));}.bind(this),this.$MessagesJewelThreadList3=function(){if(this.props.isLoaded)return;var u=this.refs.scrollable.getArea();if(u.getScrollTop()+u.getClientHeight()>=u.getScrollHeight()-1)this.props.onLoadMoreRequest&&this.props.onLoadMoreRequest();}.bind(this),this.$MessagesJewelThreadList8=function(u){u.preventDefault();this.props.onLoadMoreRequest&&this.props.onLoadMoreRequest();}.bind(this),this.$MessagesJewelThreadList4=function(){var u=this.props.newMessageRequestThreads;if(!this.props.jewelRequestsUI||this.props.folder===c('MessagingTag').PENDING||!u||u.length===0)return null;return (c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('li',{style:{height:60}}),bootloadLoader:c('JSResource')('MessagesJewelMessageRequestsRow.react').__setRef('MessagesJewelThreadList.react'),onClick:this.$MessagesJewelThreadList9,threads:u,viewer:this.props.viewer}));}.bind(this),this.$MessagesJewelThreadList5=function(){if(!this.props.jewelRequestsUI||this.props.folder!==c('MessagingTag').PENDING)return null;return (c('React').createElement('li',{className:"_16bh _16bi"},i._("Open a request to get more info about who's messaging you."),c('React').createElement('br',null),i._("They won't know you've seen it until you accept.")));}.bind(this),this.$MessagesJewelThreadList9=function(u){if(this.props.onMessageRequestsClick)this.props.onMessageRequestsClick(u);}.bind(this),this.$MessagesJewelThreadList7=function(u){if(this.props.onFilteredRequestsClick)this.props.onFilteredRequestsClick(u);}.bind(this),this.state={height:this.$MessagesJewelThreadList2()},q;}o.prototype.componentDidMount=function(){this.$MessagesJewelThreadList1=Event.listen(window,'resize',c('debounce')(function(){this.setState({height:this.$MessagesJewelThreadList2()});}.bind(this)));};o.prototype.componentWillUnmount=function(){this.$MessagesJewelThreadList1.remove();};o.prototype.render=function(){return c('React').createElement(c('ScrollableArea.react'),{className:"_2q3u",height:this.state.height,onScroll:c('throttle')(this.$MessagesJewelThreadList3,50),ref:'scrollable'},c('React').createElement('ul',{className:'jewelContent'},this.props.p2pJewelBannerContainer?c('React').createElement('li',null,this.props.p2pJewelBannerContainer):null,this.$MessagesJewelThreadList4(),this.$MessagesJewelThreadList5(),this.props.threads.map(function(p){return c('React').createElement(c('MessagesJewelThreadlistRowContainer.react'),{key:p.thread_id,thread:p,viewer:this.props.viewer});}.bind(this))),this.$MessagesJewelThreadList6());};o.propTypes={isLoaded:n.bool,isLoading:n.bool,jewelRequestsUI:n.bool,onLoadMoreRequest:n.func,p2pJewelBannerContainer:n.element,threads:n.arrayOf(n.instanceOf(c('ImmutableObject'))).isRequired,viewer:n.string.isRequired};f.exports=o;}),null);
__d('MercuryJewelThreadlistControl',['csx','cx','fbt','ArbiterMixin','CurrentUser','CSS','DOM','Event','JSLogger','MercuryConfig','MercuryFilters','MercuryThreadlistConstants','MercuryThreadlistContainer.react','MessagesJewelThreadList.react','MessagingTag','WebMessengerPermalinkConstants','React','ReactDOM','MercuryThreadInformer','MercuryUnreadState'],(function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('MercuryThreadInformer').get(),l=c('MercuryUnreadState').get(),m=c('JSLogger').create('mercury_jewel'),n=c('MessagingTag').PENDING,o=c('WebMessengerPermalinkConstants').PENDING_PATH,p='back_to_inbox';function q(u){var v=u.getFlyout();this._jewelController=u;this._threadlistContainer=c('DOM').find(v,"._3v_l");this._currentFolder=c('MessagingTag').INBOX;this._currentFilter=c('MercuryFilters').ALL;this._jewelTabLinks={};this._jewelTabCounts={};this._jewelTabLinks[c('MessagingTag').INBOX]=c('DOM').find(v,"._1sde");this._jewelTabCounts[c('MessagingTag').INBOX]=c('DOM').find(v,"._1sdg");c('Event').listen(this._jewelTabLinks[c('MessagingTag').INBOX],'click',r.bind(this,c('MessagingTag').INBOX,c('MercuryFilters').ALL));if(!c('MercuryConfig').JewelRequestsUI){this._jewelTabLinks[n]=c('DOM').find(v,"._1sdf");this._jewelTabCounts[n]=c('DOM').find(v,"._1sdh");c('Event').listen(this._jewelTabLinks[n],'click',r.bind(this,n,c('MercuryFilters').ALL));}else{this._jewelTabLinks[p]=c('DOM').find(v,"._34zq");c('Event').listen(this._jewelTabLinks[p],'click',r.bind(this,c('MessagingTag').INBOX,c('MercuryFilters').ALL));}this._markAllReadLink=c('DOM').find(v,"._1c1m");this._seeAllLink=c('DOM').find(v,'.seeMore');c('Event').listen(this._markAllReadLink,'click',function(w){l.markFolderAsRead(this._currentFolder);w.kill();}.bind(this));k.subscribe('unread-updated',s.bind(this));s.bind(this)();this.render();m.bump('opened_threadlist_'+this._currentFolder);}Object.assign(q.prototype,c('ArbiterMixin'));Object.assign(q.prototype,{render:function u(){c('ReactDOM').render(c('React').createElement(c('MercuryThreadlistContainer.react'),{ChildClass:c('MessagesJewelThreadList.react'),viewer:c('CurrentUser').getID(),folder:this._currentFolder,filter:this._currentFilter,jewelRequestsUI:c('MercuryConfig').JewelRequestsUI,onMessageRequestsClick:this._handleMessageRequestsClick.bind(this),onFilteredRequestsClick:this._handleFilteredRequestsClick.bind(this)}),this._threadlistContainer);},_handleMessageRequestsClick:function u(v){v.preventDefault();r.call(this,c('MessagingTag').PENDING,c('MercuryFilters').ALL);},_handleFilteredRequestsClick:function u(v){v.preventDefault();r.call(this,c('MessagingTag').OTHER,c('MercuryFilters').ALL);}});function r(u,v){if(this._currentFolder!==u||this._currentFilter!==v){var w=this._currentFolder,x=u===c('MessagingTag').INBOX,y=u;m.bump('opened_threadlist_'+u);if(this._jewelTabLinks[y])c('CSS').addClass(this._jewelTabLinks[y],"_1sdd");if(this._jewelTabLinks[w])c('CSS').removeClass(this._jewelTabLinks[w],"_1sdd");this._currentFolder=u;this._currentFilter=v;if(x){this._seeAllLink.href=c('WebMessengerPermalinkConstants').BASE_PATH;}else this._seeAllLink.href=o;if(c('MercuryConfig').JewelRequestsUI){c('CSS').conditionShow(this._jewelTabLinks[c('MessagingTag').INBOX],x);c('CSS').conditionShow(this._jewelTabLinks[p],!x);}this.render();}}function s(){t.call(this,c('MessagingTag').INBOX);if(!c('MercuryConfig').JewelRequestsUI)t.call(this,n);}function t(u){var v;if(l.exceedsMaxCount(u)){v=c('MercuryThreadlistConstants').MAX_UNREAD_COUNT;}else v=l.getUnreadCount(u);var w=this._jewelTabCounts[u];if(!w)return;if(v>0){if(v==c('MercuryThreadlistConstants').MAX_UNREAD_COUNT)v+='+';c('DOM').setContent(w,j._("({unread_count})",[j.param('unread_count',v)]));}else c('DOM').setContent(w,'');}f.exports=q;}),null);
__d('MercuryJewel',['MercuryChannelHandlerDEPRECATED','Arbiter','MercuryJewelCountControl','MercuryServerPayloadPreprocessor'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();c('MercuryChannelHandlerDEPRECATED').get().turnOn();var h=false;function i(j,k){'use strict';c('MercuryJewelCountControl').constructStores();c('MercuryServerPayloadPreprocessor').get().handleUpdate(k);this.$MercuryJewel1=new (c('MercuryJewelCountControl'))(j);if(j.getRoot()&&j.isOpen()){this.$MercuryJewel2(j);}else j.subscribeOnce('opened',this.$MercuryJewel2.bind(this,j));}i.prototype.$MercuryJewel2=function(j){'use strict';if(!h){e(['MercuryJewelThreadlistControl'],function(k){this.$MercuryJewel3=new k(j);}.bind(this));c('Arbiter').inform('mercury-jewel/opened',null,c('Arbiter').BEHAVIOR_STATE);h=true;}};f.exports=i;}),null);