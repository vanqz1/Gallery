if (self.CavalryLogger) { CavalryLogger.start_js(["ZhugB"]); }

__d("MessagesViewerSetID",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MESSAGES:"messages",MESSAGES_VIEW_ALL_IN_THREAD:"messages:view_all_in_thread"};}),null);
__d("MNCommerceMessageType",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={TEXT:"text",IMAGE:"image",VIDEO:"video",AUDIO:"audio",FILE:"file",ROBOT_TEXT:"robot_text",LOCATION:"location",FORCED_FETCH_MESSAGE:"forced_fetch_message",SENDER_ACTION:"sender_action",RETAIL_PRODUCT_SUBSCRIPTION:"retail_product_subscription",RETAIL_PROMOTION:"retail_promotion",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_SHIPMENT:"retail_shipment",SHIPMENT_TRACKING_EVENT:"shipment_tracking_event",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_CHECKIN:"airline_checkin",AIRLINE_BOARDINGPASS:"airline_boardingpass",AIRLINE_UPDATE:"airline_update",AIRLINE_ITINERARY:"airline_itinerary",CONTENT_SUBSCRIPTION:"content_subscription",AD_ADMIN_TEXT:"ad_admin_text",AD_TEXT:"ad_text",AD_BUBBLE:"ad_bubble",NON_AD:"non_ad",UNKNOWN:"unknown",OTHER:"other",TEMPLATE:"template",GENERIC:"generic",LIST:"list",COMPACT_LIST:"compact_list",BUTTON:"button",RECEIPT:"receipt",GENERIC_LEGACY:"generic_legacy",RIDE_INTENT:"ride_intent",RIDE_SIGNUP:"ride_signup",RIDE_WELCOME:"ride_welcome",RIDE_ORDER_CONFIRMATION:"ride_order_confirmation",RIDE_REQUESTED:"ride_requested",RIDE_DRIVER_ON_THE_WAY:"ride_driver_on_the_way",RIDE_NO_DRIVER:"ride_no_driver",RIDE_DRIVER_ARRIVING:"ride_driver_arriving",RIDE_DRIVER_CANCELED:"ride_driver_canceled",RIDE_RIDER_CANCELED:"ride_rider_canceled",RIDE_COMPLETE:"ride_complete",RIDE_ADMIN_MESSAGE:"ride_admin_message",RIDE_RECEIPT:"ride_receipt",RIDE_REENGAGEMENT_FIRST_RIDE:"ride_reengagement_first_ride",GET_RIDE:"give_get_ride",GIVE_RIDE:"send_give_get_ride",REFERER_PROMO:"referer_promo",INSTANT_GAMES_SHARE:"instant_games_share",INSTANT_GAMES_SCORE:"instant_games_score",LINK:"link_admin_message",UNLINK:"unlink_admin_message",BLOCK_ALL:"block_all_admin_message",UNBLOCK_ALL:"unblock_all_admin_message",BLOCK_PROMOTION:"block_promotion_admin_message",UNBLOCK_PROMOTION:"unblock_promotion_admin_message",INITIAL_PROMOTION:"initial_promotion_admin_message",WEAK_CONSENT_ADMIN_MESSAGE:"weak_consent_admin_message",MESSENGER_TEAM_BOT_MESSAGE:"messenger_team_bot",MESSENGER_BOT_BASE_GENERIC:"messenger_bot_base_generic",COMMERCE_COMPACT_LIST:"commerce_compact_list"};}),null);
__d("StickerAssetType",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={IMAGE:"BestEffortImage",SPRITE:"SpriteImage",PADDED_SPRITE:"PaddedSpriteImage"};}),null);
__d('TypingDetector',['ArbiterMixin','Event','Input','Run','SubscriptionsHandler','TypingStates','createObjectFrom','emptyFunction'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){this._input=i;this._ignoreKeys={};this._getValueFn=j;}Object.assign(h.prototype,c('ArbiterMixin'),{_timeout:7000,_currentState:c('TypingStates').INACTIVE,init:function i(){this.init=c('emptyFunction');this.reset();this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(c('Event').listen(this._input,'keyup',this._update.bind(this)),c('Run').onUnload(this._onunload.bind(this)));},reset:function i(){clearTimeout(this._checkTimer);this._checkTimer=null;this._lastKeystrokeAt=null;this._currentState=c('TypingStates').INACTIVE;},setIgnoreKeys:function i(j){this._ignoreKeys=c('createObjectFrom')(j);},destroy:function i(){this._subscriptions.release();},_onunload:function i(){if(this._currentState==c('TypingStates').TYPING)this._transition(c('TypingStates').QUITTING);},_update:function i(event){var j=c('Event').getKeyCode(event),k=this._currentState;if(!this._ignoreKeys[j]){var l=this._getValueFn?this._getValueFn():c('Input').getValue(this._input);if(l.trim().length===0){if(k==c('TypingStates').TYPING)this._transition(c('TypingStates').INACTIVE);}else if(k==c('TypingStates').TYPING){this._recordKeystroke();}else if(k==c('TypingStates').INACTIVE){this._transition(c('TypingStates').TYPING);this._recordKeystroke();}}},_transition:function i(j){this.reset();this._currentState=j;this.inform('change',j);},_recordKeystroke:function i(){this._lastKeystrokeTime=Date.now();if(!this._checkTimer)this._checkTimer=setTimeout(this._checkTyping.bind(this),this._timeout);},_checkTyping:function i(){var j=this._lastKeystrokeTime+this._timeout,k=Date.now();if(k>j){this._transition(c('TypingStates').INACTIVE);}else{clearTimeout(this._checkTimer);this._checkTimer=setTimeout(this._checkTyping.bind(this),j-k+10);}}});f.exports=h;}),null);
__d('TypingDetectorController',['AsyncRequest','AvailableList','AvailableListConstants','ChatVisibility','Keys','MercuryServerRequestsConfig','TypingDetector','TypingStates','emptyFunction','ifRequired','setTimeoutAcrossTransitions','shield'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k,l,m,n){this.userID=i;this.input=j;this.source=k;this.threadID=m;this.remoteState=c('TypingStates').INACTIVE;this.notifyTimer=null;l=l||{};this.notifyDelay=l.notifyDelay||this.notifyDelay;this._typingDetector=new (c('TypingDetector'))(j,n);this._typingDetector.init(l);this._typingDetector.subscribe('change',this._stateChange.bind(this));}h.prototype.setUserAndThread=function(i,j){if(this.userID!==i||this.threadID!==j){this.resetState();this.userID=i;this.threadID=j;}};h.prototype.setIgnoreEnter=function(i){var j=i?[c('Keys').RETURN]:[];this._typingDetector.setIgnoreKeys(j);};h.prototype.resetState=function(){this._notifyState(c('TypingStates').INACTIVE);this.remoteState=c('TypingStates').INACTIVE;this._typingDetector.reset();clearTimeout(this.notifyTimer);this.notifyTimer=null;};h.prototype.destroy=function(){this.resetState();this._typingDetector.destroy();};h.prototype._stateChange=function(i,j){if(j!=c('TypingStates').QUITTING){clearTimeout(this.notifyTimer);this.notifyTimer=c('setTimeoutAcrossTransitions')(c('shield')(this._notifyState,this,j),this.notifyDelay);}else this._notifyState(j,true);};h.prototype._notifyState=function(i,j){if(!this.userID&&!this.threadID||!c('ChatVisibility').isOnline()||i===this.remoteState||c('ifRequired')('ChannelConnection',function(k){return k.disconnected();},function(){return true;}))return;this._sendRequest(i,this.userID,j);};h.prototype._sendRequest=function(i,j,k){this.remoteState=i;var l={typ:i,to:j,source:this.source,thread:this.threadID},m=new (c('AsyncRequest'))().setHandler(this._onTypResponse.bind(this,j)).setErrorHandler(c('emptyFunction')).setData(l).setURI('/ajax/messaging/typ.php').setAllowCrossPageTransition(true).setOption('asynchronous_DEPRECATED',!k);if(c('MercuryServerRequestsConfig').msgrRegion)m.setRequestHeader('X-MSGR-Region',c('MercuryServerRequestsConfig').msgrRegion);m.send();};h.prototype._onTypResponse=function(i,j){var k=j.getPayload()||{};if(k.offline)c('AvailableList').set(i,c('AvailableListConstants').OFFLINE,'typing_response');};Object.assign(h.prototype,{notifyDelay:1000});f.exports=h;}),null);
__d('MercuryMessageDeliveryState',[],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={SENDING:1,SENT:2,DELIVERED:3,ERROR:0,UNKNOWN:-1};f.exports=h;}),null);
__d('MercuryMessageInfo',['MercuryActionStatus','MercuryMessageDeliveryState','MercuryViewer'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={isOutbound:function i(j){return j.author===c('MercuryViewer').getID();},isInbound:function i(j){return !h.isOutbound(j);},isSending:function i(j){return (j.status===c('MercuryActionStatus').UNSENT||j.status===c('MercuryActionStatus').UNCONFIRMED||j.status===c('MercuryActionStatus').UNABLE_TO_CONFIRM||j.status===c('MercuryActionStatus').RESENDING);},isSent:function i(j){return (j.status===undefined||j.status===c('MercuryActionStatus').SUCCESS);},hasError:function i(j){return (j.status===c('MercuryActionStatus').FAILED_UNKNOWN_REASON||j.status===c('MercuryActionStatus').UNABLE_TO_CONFIRM||j.status===c('MercuryActionStatus').ERROR);},getDeliveryState:function i(j,k){if(this.hasError(j))return c('MercuryMessageDeliveryState').ERROR;if(this.isSending(j))return c('MercuryMessageDeliveryState').SENDING;if(this.isSent(j)){if(j.timestamp<=k)return c('MercuryMessageDeliveryState').DELIVERED;return c('MercuryMessageDeliveryState').SENT;}return c('MercuryMessageDeliveryState').UNKNOWN;}};f.exports=h;}),null);
__d('MercuryErrorInfo',['fbt','MercuryErrorType','MercuryMessageInfo'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={getMessage:function j(k){var l='';if(i.isConnectionError(k)){l=h._("This message didn't send.");if(i.isTransient(k))l=h._("{message} Check your internet connection and click to try again.",[h.param('message',l)]);}else{if(k&&k.description){l=k.description;}else l=h._("This message failed to send.");if(i.isTransient(k))l=h._("{message} Click to send again.",[h.param('message',l)]);}return l;},isConnectionError:function j(k){if(k&&k.type==c('MercuryErrorType').TRANSPORT)return k.code===1001||k.code===1004||k.code===1006;return false;},isTransient:function j(k){return k&&k.is_transient;},isPermanent:function j(k){return k?!this.isTransient(k):false;},hasErrorStatus:function j(k){return c('MercuryMessageInfo').hasError(k);}};f.exports=i;}),null);
__d('MercuryMessageError.react',['cx','CurrentUser','ImmutableObject','Link.react','MercuryErrorInfo','MercuryMessageActions','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.messageResend=function(r){r.preventDefault();var s=this.props.message,t=s.error_data;if(c('MercuryErrorInfo').isTransient(t))c('MercuryMessageActions').getForFBID(this.props.authorFBID).resend(this.props.message);}.bind(this),this.$MercuryMessageError1=function(r){if(c('MercuryErrorInfo').hasErrorStatus(r)){return "_2fs2"+(' '+"_2fs3")+(c('MercuryErrorInfo').isTransient(r.error_data)?' '+"_2fs4":'')+(c('MercuryErrorInfo').isPermanent(r.error_data)?' '+"_2fs5":'');}else return "_2fs6 _2fs2";},this.$MercuryMessageError2=function(r){var s='',t=r.error_data;if(c('MercuryErrorInfo').hasErrorStatus(r))s=c('MercuryErrorInfo').getMessage(t);if(typeof s==='object'&&s.__html)s=s.__html;return s;},n;}l.prototype.render=function(){var m=this.props.message,n=m.error_data;return c('React').createElement(c('Link.react'),babelHelpers['extends']({},this.props,{href:'#',className:c('joinClasses')(this.props.className,this.$MercuryMessageError1(m)),tabIndex:c('MercuryErrorInfo').isTransient(n)?0:null,onClick:this.messageResend}),c('React').createElement('i',{className:"_2fs1"}),c('React').createElement('span',{dangerouslySetInnerHTML:{__html:this.$MercuryMessageError2(m)}}));};l.propTypes={authorFBID:k.string,message:k.instanceOf(c('ImmutableObject')).isRequired};l.defaultProps={authorFBID:c('CurrentUser').getID()};f.exports=l;}),null);
__d('ChatEditParticipantsUtils',['AsyncDialog','AsyncRequest','MercuryIDs','MercuryThreadIDMap','URI'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('MercuryThreadIDMap').get(),i={showParticipantsModal:function j(k){if(!c('MercuryIDs').isGroupChat(k))return;h.getServerIDFromClientID(k,function(l){c('AsyncDialog').send(new (c('AsyncRequest'))(new (c('URI'))('/ajax/browser/dialog/multichat_members/').addQueryData({id:l})));});}};f.exports=i;}),null);
__d('MessengerAdminGroupUtils',['fbt','MercuryConfig','MercuryIDs','MessengerApprovalModeTypes','MessengerJoinableModeType','WorkModeConfig'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={isJoinableAndOpenThread:function j(k){return this.isJoinableThread(k)&&this.isApprovalOpenThread(k);},isJoinableAndApprovalRequiredThread:function j(k){return !!(this.isJoinableThread(k)&&k&&k.approval_mode===c('MessengerApprovalModeTypes').APPROVALS);},shouldAddToApprovalQueue:function j(k,l){return !!(this.isJoinableAndApprovalRequiredThread(k)&&k&&!i.isViewerAdmin(k.admin_ids,l));},isJoinableThread:function j(k){return !!(c('MercuryConfig').WWWJoinableMasterGK&&k&&k.is_thread_queue_enabled===true&&k.joinable_mode&&k.joinable_mode.mode===c('MessengerJoinableModeType').JOINABLE);},isApprovalOpenThread:function j(k){return !!(c('MercuryConfig').WWWJoinableMasterGK&&k&&k.approval_mode===c('MessengerApprovalModeTypes').OPEN);},isOwner:function j(k,l){return k&&this.isJoinableThread(l);},canSeeGroupOptions:function j(k,l,m){var n=c('WorkModeConfig').is_work_user;return !n&&this.isJoinableThread(l);},canMakeOthersAdmins:function j(k,l,m){return this.isOwner(k,m)&&!l;},canMakeSelfAdmin:function j(k,l){return this.isJoinableThread(l)&&l.admin_ids.length===0&&k;},canRemoveAdmin:function j(k,l,m){return this.isOwner(k,m)&&l;},canRemoveFromGroup:function j(k,l){return this.isOwner(k,l)||!this.isJoinableThread(l);},showJoinableLink:function j(k){var l=!!(k&&k.joinable_mode&&k.joinable_mode.link),m=i.isJoinableThread(k);return m&&l;},showJoinableApprovalToggle:function j(k,l){var m=i.isViewerAdmin(k.admin_ids,l);return i.isOwner(m,k);},showApprovalQueue:function j(k,l){var m=i.isViewerAdmin(k.admin_ids,l),n=i.isOwner(m,k),o=0;if(k&&k.approval_queue_ids&&k.approval_queue_ids.length)o=k.approval_queue_ids.length;var p=i.isJoinableAndApprovalRequiredThread(k);return (p&&n&&o>0);},showParticipantsModal:function j(k,l,m){return this.isJoinableThread(m)&&!k&&!l;},canUpdateThreadCustomization:function j(k,l){var m=i.isJoinableThread(k),n=i.isViewerAdmin(k.admin_ids,l);return k.is_subscribed&&(m&&n||!m);},isViewerAdmin:function j(k,l){return this.isAdmin(k,c('MercuryIDs').getParticipantIDFromUserID(l));},isAdmin:function j(k,l){return k!==null&&k!==undefined&&k.indexOf(l)!==-1;},getLeaveGroupBodyText:function j(k,l){return this.isOwner(k,l)?h._("Leaving this group will remove you as an owner and allow other members to manage the group. You will no longer be able to send or receive new messages."):h._("\u0429\u0435 \u0441\u043f\u0440\u0435\u0442\u0435 \u0434\u0430 \u043f\u043e\u043b\u0443\u0447\u0430\u0432\u0430\u0442\u0435 \u0441\u044a\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e\u0442 \u0442\u043e\u0437\u0438 \u0440\u0430\u0437\u0433\u043e\u0432\u043e\u0440 \u0438 \u0445\u043e\u0440\u0430\u0442\u0430 \u0449\u0435 \u0432\u0438\u0434\u044f\u0442, \u0447\u0435 \u0441\u0442\u0435 \u0433\u043e \u043d\u0430\u043f\u0443\u0441\u043d\u0430\u043b\u0438.");},getLeaveGroupTitleText:function j(k,l){return this.isOwner(k,l)?h._("Leave this conversation?"):h._("\u041d\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u0435 \u043b\u0438 \u0440\u0430\u0437\u0433\u043e\u0432\u043e\u0440\u0430?");},getLeaveGroupButtonText:function j(k,l){return this.isOwner(k,l)?h._("Leave converstaion"):h._("\u041d\u0430\u043f\u0443\u0441\u043a\u0430\u043d\u0435");},getMakeOwnerBodyText:function j(k,l){return k?h._("As a group owner, you will be able to manage group ownership and remove members from the conversation. Only owners will be able to add other owners."):h._("As a group owner, \"{owner's name}\" will be able to manage group ownership and remove members from the conversation. They will be able to remove ownership from other owners.",[h.param('owner\'s name',l)]);},getMakeOwnerTitleText:function j(k){return k?h._("Become group owner?"):h._("Add group owner?");},getMakeOwnerButtonText:function j(k){return k?h._("Become owner"):h._("Make owner");},getRemoveOwnerBodyText:function j(k,l,m){var n=void 0;if(k&&l){n=h._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group. Any other member will be able to own the group.");}else if(k&&!l){n=h._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group.");}else n=h._("\"{owner's name}\" will no longer manage group ownership and remove members from the conversation. They will still be a participant in the group.",[h.param('owner\'s name',m)]);return n;}};f.exports=i;}),null);
__d('MessengerHotLikePreviewEvents',['mixInEventEmitter'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={START:'start',STOP:'stop',STOP_EMOJI:'stop_emoji',POP:'pop',REMOVE:'remove',FINISH_ANIMATION:'finish_animation',FINISH_EMOJI_ANIMATION:'finish_emoji_animation'};c('mixInEventEmitter')(h,{start:true,stop:true,stop_emoji:true,pop:true,remove:'remove',finish_animation:'finish_animation',finish_emoji_animation:'finish_emoji_animation'});f.exports=h;}),null);
__d("XStickerAssetController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/stickers\/asset\/",{sticker_id:{type:"Int",required:true},image_type:{type:"Enum",defaultValue:"BestEffortImage",enumType:1}});}),null);
__d('MessengerHotLikeUtils',['EmojiLikeConstants','StickerAssetType','StickerConstants','XStickerAssetController'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={SizeTimes:{small:1000,medium:2000,large:3000},getStickerIDForTime:function i(j){var k=c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID;switch(true){case j<this.SizeTimes.small:k=c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID;break;case j<this.SizeTimes.medium:k=c('StickerConstants').HOT_LIKE_MEDIUM_STICKER_ID;break;case j<this.SizeTimes.large:k=c('StickerConstants').HOT_LIKE_LARGE_STICKER_ID;break;}return k;},getEmojiSizeForTime:function i(j){var k=c('EmojiLikeConstants').size.SMALL;if(j<this.SizeTimes.small){k=c('EmojiLikeConstants').size.SMALL;}else if(j<this.SizeTimes.medium){k=c('EmojiLikeConstants').size.MEDIUM;}else if(j<this.SizeTimes.large)k=c('EmojiLikeConstants').size.LARGE;return k;},getMetadataForHotLike:function i(j){var k=void 0;switch(j){case c('StickerConstants').HOT_LIKE_LARGE_STICKER_ID:k=120;break;case c('StickerConstants').HOT_LIKE_MEDIUM_STICKER_ID:k=84;break;case c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID:k=35;break;case c('EmojiLikeConstants').size.LARGE:k=64;break;case c('EmojiLikeConstants').size.MEDIUM:k=64;break;case c('EmojiLikeConstants').size.SMALL:k=32;break;}return k?{height:k,width:k}:undefined;},getPreviewURI:function i(){return c('XStickerAssetController').getURIBuilder().setInt('sticker_id',c('StickerConstants').HOT_LIKE_LARGE_STICKER_ID).setEnum('image_type',c('StickerAssetType').IMAGE).getURI().toString();},getURIWithID:function i(j){return c('XStickerAssetController').getURIBuilder().setInt('sticker_id',j).setEnum('image_type',c('StickerAssetType').IMAGE).getURI().toString();},getCustomEmojiFromThread:function i(j){return j&&j.custom_like_icon;}};f.exports=h;}),null);
__d('MessengerContextBannerBootloader',['BootloadedComponent.react','CurrentUser','DOM','JSResource','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(k,l,m,n,o){var p=c('DOM').create('div');i(k,l,function(q){c('ReactDOM').render(q,p,m(p));},n,o);}function i(k,l,m,n,o,p){p=babelHelpers['extends']({left:0,position:'absolute',right:0,top:0},p);j({otherUserFBIDs:n&&[n],threadID:k,style:p},l,m,o);}function j(k,l,m,n){m(c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadPlaceholder:c('React').createElement('div',{style:{height:80}}),bootloadLoader:c('JSResource')('MessengerContextBannerContainer.react').__setRef('MessengerContextBannerBootloader'),location:l,onResize:n,viewer:c('CurrentUser').getID()},k)));}f.exports={bootload:h,getBootloadedComponent:i};}),null);
__d('MNCommerceCacheTimeoutLimits',[],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={SUCCESS_TIMEOUT:10,ERROR_TIMEOUT:1};f.exports=h;}),null);
__d('MessageRequestUtils',['MessagingTag'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={isMessageRequest:function i(j){return (j.folder===c('MessagingTag').PENDING||j.folder===c('MessagingTag').OTHER)&&j.can_reply;},isFiltered:function i(j){return j.folder===c('MessagingTag').OTHER;}};f.exports=h;}),null);
__d('MoveToWorkUtils',['CurrentUser'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){return c('CurrentUser').isEmployee()&&c('CurrentUser').hasWorkUser();}f.exports={isViewerEligible:h};}),null);
__d('MercuryTypingReceiver',['Arbiter','ChannelConstants','FBID','MercuryActionType','MercuryIDs','MercuryPayloadSource','MercuryDispatcher','MercurySingletonMixin','MercuryThreadIDMap','MercuryViewer','TypingStates','isEmpty','mixInEventEmitter','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('MercuryThreadIDMap').get(),i=30000;function j(k){'use strict';this.$MercuryTypingReceiver1=null;this.$MercuryTypingReceiver2={};this.$MercuryTypingReceiver3=c('MercuryDispatcher').getForFBID(k);this.$MercuryTypingReceiver3.subscribe('update-typing-state',function(m,n){var o=n.payload_source;if(o!=c('MercuryPayloadSource').CLIENT_CHANNEL_MESSAGE)return;var p=n.actions;if(!p||!p.length)return;var q=c('MercuryActionType').USER_GENERATED_MESSAGE;p.forEach(function(r){if(r.action_type==q&&r.author!=c('MercuryViewer').getID())this.$MercuryTypingReceiver4(r.thread_id,r.author);}.bind(this));}.bind(this));var l;if(c('FBID').isUser(k)){l=[c('ChannelConstants').getArbiterType('typ'),c('ChannelConstants').getArbiterType('ttyp')];}else l=[c('ChannelConstants').getArbiterType('page_typing')];c('Arbiter').subscribe(l,function(m,n){var o=n.obj,p=this.$MercuryTypingReceiver5(o);if(p){var q=c('MercuryIDs').getParticipantIDFromUserID(o.from.toString());if(o.st==c('TypingStates').TYPING){this.$MercuryTypingReceiver2[p]=this.$MercuryTypingReceiver2[p]||{};var r=this.$MercuryTypingReceiver2[p][q];this.$MercuryTypingReceiver2[p][q]=Date.now();if(!this.$MercuryTypingReceiver1)this.$MercuryTypingReceiver1=c('setTimeoutAcrossTransitions')(function(){this.$MercuryTypingReceiver6();}.bind(this),3000);!r&&this.$MercuryTypingReceiver7(p);}else if(o.st==c('TypingStates').INACTIVE)this.$MercuryTypingReceiver4(p,q);}}.bind(this));}j.prototype.$MercuryTypingReceiver8=function(k){'use strict';var l=this.$MercuryTypingReceiver2[k]||{},m=Object.keys(l);m.sort(function(n,o){return l[n]-l[o];});return m;};j.prototype.$MercuryTypingReceiver6=function(){'use strict';this.$MercuryTypingReceiver1=null;var k=Date.now(),l={},m=false;for(var n in this.$MercuryTypingReceiver2){var o=false;for(var p in this.$MercuryTypingReceiver2[n]||{})if(this.$MercuryTypingReceiver2[n][p]<k-i){delete this.$MercuryTypingReceiver2[n][p];o=true;}else m=true;if(o)l[n]=this.$MercuryTypingReceiver8(n);}if(!c('isEmpty')(l))this.$MercuryTypingReceiver9(l);if(m)this.$MercuryTypingReceiver1=c('setTimeoutAcrossTransitions')(function(){this.$MercuryTypingReceiver6();}.bind(this),3000);};j.prototype.$MercuryTypingReceiver4=function(k,l){'use strict';if(k in this.$MercuryTypingReceiver2)if(l in this.$MercuryTypingReceiver2[k]){delete this.$MercuryTypingReceiver2[k][l];this.$MercuryTypingReceiver7(k);}};j.prototype.$MercuryTypingReceiver9=function(k){'use strict';this.releaseHeldEventType('state-changed');this.emitAndHold('state-changed',k);};j.prototype.$MercuryTypingReceiver7=function(k){'use strict';var l={};l[k]=this.$MercuryTypingReceiver8(k);this.$MercuryTypingReceiver9(l);};j.prototype.$MercuryTypingReceiver5=function(k){'use strict';if(k.thread_fbid)return h.getClientIDFromServerIDNow(k.thread_fbid.toString());if(k.type==='typ'||k.type==='page_typing')return c('MercuryIDs').getThreadIDFromUserID(k.from.toString());return null;};c('mixInEventEmitter')(j,{'state-changed':true});Object.assign(j,c('MercurySingletonMixin'));f.exports=j;}),null);
__d('MercuryIndicatorController',['fbt','ArbiterMixin','DOM','MercuryActionType','MercuryDelayedRoger','MercuryIDs','MercuryMessageSourceTags','MercuryParticipants','MercuryRoger','MercurySourceType','MercuryThreads','MercuryTypingReceiver','MercuryViewer','WorkModeConfig','arrayContains','formatDate','removeFromArray'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('MercuryDelayedRoger').get(),j=c('MercuryRoger').get(),k=c('MercuryThreads').get(),l=c('MercuryTypingReceiver').get(),m=[];function n(o){this._threadID=o;this._canonicalUser=c('MercuryIDs').getUserIDFromThreadID(o);m.push(this);}Object.assign(n.prototype,c('ArbiterMixin'),{destroy:function o(){c('removeFromArray')(m,this);},setLastMessage:function o(p){this._lastMsg=p;this._handleStateChange();},_informStateChanged:function o(p){if(p.activity=='none'&&this._currentActivity=='none')return;if(this._lastMsg&&c('MercuryViewer').isViewer(this._lastMsg.author))p.self_authored=true;this._currentActivity=p.activity;this.inform('state-changed',p);},_notifySentFrom:function o(){var p,q,r=this._lastMsg.source_tags||this._lastMsg.tags||[];if(c('arrayContains')(r,c('MercuryMessageSourceTags').MESSENGER)){if(!c('WorkModeConfig').is_work_user){p=c('DOM').create('a',{href:'/mobile/messenger','class':'fcg',target:'_blank'},h._("\u0418\u0437\u043f\u0440\u0430\u0442\u0435\u043d\u043e \u043e\u0442 Messenger"));}else p=c('DOM').create('a',{href:'https://work.fb.com/workchat/','class':'fcg',target:'_blank'},h._("Sent from Work Chat"));q='sentFromMobile';}else if(c('arrayContains')(r,c('MercuryMessageSourceTags').MOBILE)){p=c('DOM').create('a',{href:'/mobile','class':'fcg',target:'_blank'},h._("\u0418\u0437\u043f\u0440\u0430\u0442\u0435\u043d\u043e \u043e\u0442 \u043c\u043e\u0431\u0438\u043b\u043d\u0438\u044f"));q='sentFromMobile';}else if(c('arrayContains')(r,c('MercuryMessageSourceTags').EMAIL)){p=h._("\u0418\u0437\u043f\u0440\u0430\u0442\u0435\u043d\u043e \u043e\u0442 \u0438\u043c\u0435\u0439\u043b");q='sentFromEmail';}else if(c('arrayContains')(r,c('MercurySourceType').MESSENGER_COMMERCE)){q='sentFromMessengerCommerce';}else{this._informStateChanged({activity:'none'});return;}this._informStateChanged({activity:q,text:p});},_notifySeenTimestamp:function o(p){var q=Date.now()*.001,r=j.getSeenTimestamp(this._threadID,p[0]),s=r.action*.001,t;if(s<q-518400){t='M j';}else if(s<q-86400){t='D g:ia';}else t='g:ia';this._informStateChanged({activity:'seen-timestamp',text:h._("Seen {timestamp}",[h.param('timestamp',c('formatDate')(s,t))])});},_nameNormalizer:function o(p){var q;c('MercuryParticipants').getMulti(p,function(r){function s(u){if(r[u]!==undefined&&r[u].short_name){return r[u].short_name.toLowerCase();}else return u;}var t=p.map(s);q=function u(v){var w=s(v),x=t.indexOf(w)!==t.lastIndexOf(w);return x?r[v].name:r[v].short_name;};});return q;},_seenByEveryone:function o(p,q,r){var s=r?r.participants.length:0,t=p.length;if(q.author!=c('MercuryViewer').getID()&&(!r||r.participants.indexOf(q.author)>-1))t++;return s>2&&t>=s-1;},_notifySeenBy:function o(p){var q=this._lastMsg,r=true;c('MercuryParticipants').getMulti(p,function(s){r=false;if(this._lastMsg!=q)return;var t=k.getThreadMetaNow(this._threadID),u=null;if(t&&t.custom_nickname)u=t.custom_nickname;var v=[];for(var w in s){var x=s[w],y=x.short_name;if(u&&u[x.fbid])y=u[x.fbid];v[w]=y;}var z,aa=false;if(this._seenByEveryone(p,q,t)){z={prefix:'Seen by everyone'};}else if(p.length==1){z={prefix:'Seen by ',names:' '+v[p[0]]};}else if(p.length==2){z={prefix:'Seen by ',names:' '+v[p[0]]+', '+v[p[1]]};}else if(p.length==3){z={prefix:'Seen by ',names:' '+v[p[0]]+', '+v[p[1]]+', '+v[p[2]]};}else if(p.length>3){z={prefix:'Seen by ',names:' '+v[p[0]]+', '+v[p[1]]+', '};aa=true;}this._informStateChanged({activity:'seen-by',text:z,seenBy:p,showTooltip:aa});}.bind(this));r&&this._informStateChanged({activity:'none'});},_handleStateChange:function o(){var p=c('MercuryActionType').LOG_MESSAGE;if(!this._lastMsg||this._lastMsg.action_type==p){this._informStateChanged({activity:'none'});return;}if(this._typing&&this._typing.length){this._informStateChanged({activity:'none'});return;}if(this._canonicalUser&&this._lastMsg.author!=c('MercuryViewer').getID()){this._notifySentFrom();return;}var q=i.getSeenBy(this._threadID,true);if(q.length)if(this._canonicalUser){this._notifySeenTimestamp(q);return;}else{this._notifySeenBy(q);return;}this._informStateChanged({activity:'none'});}});l.addRetroactiveListener('state-changed',function(o){m.forEach(function(p){var q=o[p._threadID];if(q!==undefined){p._typing=q;p._handleStateChange();}});});i.subscribe('state-changed',function(o,p){m.forEach(function(q){p[q._threadID]&&q._handleStateChange();});});f.exports=n;}),null);
__d('MercuryLastMessageIndicator.react',['cx','fbt','DOM','MercuryIndicatorController','MessengerTextWithEmoticons.react','MercuryParticipants','React','ReactDOM','TooltipData','emptyFunction','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={data:{}},this.getRootClass=function(){var s="_510g"+(this.state.data.self_authored?' '+"_510e":''),t=this.state.data.activity,u=null;if(String(t).startsWith('seen')){u='seen';}else if(t=='typing'){u=this.props.hideTyping?null:t;}else u=t;return c('joinClasses')(s,u,this.props.className);}.bind(this),this.isVisible=function(s,t){s=s||this.props;t=t||this.state;return (t.data&&t.data.activity!='none'&&!(s.hideTyping&&t.data.activity=='typing'));}.bind(this),this.isSeenBy=function(s,t){s=s||this.props;t=t||this.state;return (t.data&&t.data.activity==='seen-by');}.bind(this),this.setText=function(){if(this.state.data.text)c('DOM').setContent(c('ReactDOM').findDOMNode(this.refs.text),this.state.data.text);}.bind(this),this.setTooltip=function(){if(this.state.data.activity==='seen-by'&&this.state.data.showTooltip)c('MercuryParticipants').getMulti(this.state.data.seenBy,function(s){var t=c('DOM').create('div',null,this.state.data.seenBy.map(function(u){return c('DOM').create('div',null,s[u].name);}));c('TooltipData').set(c('DOM').find(c('ReactDOM').findDOMNode(this),'span.more'),t,'above','center');}.bind(this));}.bind(this),this.$MercuryLastMessageIndicator4=function(s){var t=s&&s.text;if(!t)return null;if(!t.names){return i._("\u0412\u0438\u0434\u044f\u043d\u043e \u043e\u0442 \u0432\u0441\u0438\u0447\u043a\u0438");}else{var u=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoji:true,renderEmoticons:true,text:t.names});if(!s.showTooltip){return i._("\u0412\u0438\u0434\u044f\u043d\u043e \u043e\u0442 {names}",[i.param('names',u)]);}else{var v=this.$MercuryLastMessageIndicator5(s);return i._("Seen by {names}{=num more link}",[i.param('names',u),i.param('=num more link',v)]);}}}.bind(this),this.$MercuryLastMessageIndicator5=function(s){if(!s||!s.text||!s.showTooltip)return null;var t={},u=0;if(s.activity==='seen-by'){var v=null;c('MercuryParticipants').getMulti(s.seenBy,function(x){v=s.seenBy.map(function(y){return x[y].name;}).join('\r\n');u=Object.keys(x).length-2;});t=Object.assign({'data-tooltip-alignh':'center'},c('TooltipData').propsFor(v,'above'));}var w=i._({"*":"\u043e\u0449\u0435 {num}"},[i.param('num',u,[0])]);return (c('React').createElement('span',babelHelpers['extends']({className:'more'},t),w));},this.$MercuryLastMessageIndicator1=function(s){this.$MercuryLastMessageIndicator3=new (c('MercuryIndicatorController'))(s.threadID);this.$MercuryLastMessageIndicator6=this.$MercuryLastMessageIndicator3.subscribe('state-changed',function(t,u){return this.setState({data:u});}.bind(this));s.lastMessage&&this.$MercuryLastMessageIndicator3.setLastMessage(s.lastMessage);}.bind(this),this.$MercuryLastMessageIndicator2=function(){this.$MercuryLastMessageIndicator6.unsubscribe();this.$MercuryLastMessageIndicator3.destroy();}.bind(this),o;}m.prototype.componentDidMount=function(){'use strict';this.$MercuryLastMessageIndicator1(this.props);};m.prototype.componentWillReceiveProps=function(n){'use strict';if(n.threadID!=this.props.threadID){this.$MercuryLastMessageIndicator2();this.$MercuryLastMessageIndicator1(n);}else if(n.lastMessage!=this.props.lastMessage)this.$MercuryLastMessageIndicator3.setLastMessage(n.lastMessage);};m.prototype.componentWillUpdate=function(n,o){'use strict';if(this.isVisible(n,o))this.props.indicatorWillShow();};m.prototype.componentDidUpdate=function(){'use strict';if(!this.isVisible())return;if(!this.isSeenBy()){this.setText();this.setTooltip();}this.props.indicatorDidShow();};m.prototype.componentWillUnmount=function(){'use strict';this.$MercuryLastMessageIndicator2();};m.prototype.render=function(){'use strict';if(this.isSeenBy()){var n=this.$MercuryLastMessageIndicator4(this.state.data);return c('React').createElement('div',{className:this.getRootClass()},c('React').createElement('div',{className:"_510h"}),c('React').createElement('span',{className:"_510f"},n));}else return c('React').createElement('div',{className:this.getRootClass()},c('React').createElement('div',{className:"_510h"}),c('React').createElement('span',{className:"_510f",ref:'text'},'\u00A0'));};m.propTypes={hideTyping:l.bool,indicatorWillShow:l.func,indicatorDidShow:l.func,lastMessage:l.object,threadID:l.string.isRequired};m.defaultProps={indicatorWillShow:c('emptyFunction'),indicatorDidShow:c('emptyFunction')};f.exports=m;}),null);
__d('WebMessengerThreadPermalinks',['MercuryIDs','MessagingTag','URI','WebMessengerPermalinkConstants','WWWBase','requireWeak'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={getThreadURI:function m(n,o,p){if(c('MercuryIDs').isCanonical(n)){j(n,o,p);}else k(n,o,p);},getThreadURIFromUserID:function m(n,o){return i(n,o);}};function i(m,n){var o=new (c('URI'))(c('WWWBase').uri);o.setPath(l(n)+'/'+m);return o.toString();}function j(m,n,o){var p=c('MercuryIDs').tokenize(m).value;n&&n(i(p,o));}function k(m,n,o){c('requireWeak')('MercuryThreadIDMap',function(p){var q=p.get();q.getServerIDFromClientID(m,function(r){var s=new (c('URI'))(c('WWWBase').uri);s.setPath(c('WebMessengerPermalinkConstants').getURIPathForThreadID(r,l(o)));n&&n(s.toString());});});}function l(m){var n=c('WebMessengerPermalinkConstants').BASE_PATH;if(m&&m!=c('MessagingTag').INBOX)n+='/'+m;return n;}f.exports=h;}),null);
__d('MessagesViewer',['AsyncRequest','DOM','MessagesViewerSetID','PhotoStore','React','ReactDOM','emptyFunction','ge'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={renderSpotlight:function j(k,l,m,n){var o=k.setID;if(!o)o=c('MessagesViewerSetID').MESSAGES;i(c('React').createElement(m,{actorid:k.actorid,dimensions:[k.dimensions],disablepaging:k.disablePaging,disableForward:k.disableForward,forwardDialogComponent:n,open:true,photoid:k.fbid,reverse:false,rootClassName:k.rootClassName,setid:o,snapToPhoto:k.snapToPhoto,thumbsrc:k.src}));if(!c('PhotoStore').hasBeenCreated(o)&&k.endpoint){var p=new (c('AsyncRequest'))(k.endpoint);if(l)p.setRelativeTo(l);p.send();}},renderVideo:function j(k){i(k);}};function i(j){var k=c('ge')('messages_viewer');if(!k){k=c('DOM').create('div',{id:'messages_viewer'});document.body.appendChild(k);}j=c('ReactDOM').render(j,k);j.subscribeOnce('close',function(){c('ReactDOM').unmountComponentAtNode(k);});}f.exports=h;}),null);
__d('MercuryMessageRendererUtils',['cx','invariant','HovercardLink','MercuryConfig','MercuryViewer','MessengerTextWithEmoticons.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={getLinkToParticipant:function k(l,m){var n=l.fbid,o=c('HovercardLink').constructEndpoint({id:n}),p=m&&m.custom_nickname&&m.custom_nickname[n];if(p&&c('MercuryConfig').MessengerNewEmojiGK)p=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:p});var q=p?p:l.name;if(l.href)return (c('React').createElement('a',{className:"_5wzt",href:l.href,'data-hovercard':o},q));return q;},moveCurrentUserToFront:function k(){var l=arguments.length<=0||arguments[0]===undefined?[]:arguments[0];!l?i(0):void 0;var m=l.indexOf(c('MercuryViewer').getID());if(m>0){var n=l.filter(function(o){return o!==c('MercuryViewer').getID();});return [c('MercuryViewer').getID()].concat(n);}return l;}};f.exports=j;}),null);
__d('MercuryLogMessageRenderer',['cx','fbt','invariant','ix','Bootloader','CSS','Image.react','MercuryAttachmentViewer','MercuryConfig','MercuryViewer','MercuryLogMessageType','MessengerAdminGroupUtils','MessengerTextWithEmoticons.react','MercuryParticipants','React','ReactDOM','MercuryMessageRendererUtils','TextWithEntities.react','MercuryThreads','TooltipLink.react','UserAgent'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=c('MercuryThreads').get(),m={renderText:function ba(ca,da,ea,fa){da=da||l.getThreadMetaNow(ca.thread_id);switch(ca.log_message_type){case c('MercuryLogMessageType').SUBSCRIBE:var ga=ca.author;!ca.log_message_data?j(0):void 0;var ha=ca.log_message_data.added_participants;!ha?j(0):void 0;var ia=ha.length===1&&ga===ha[0];if(ia){c('Bootloader').loadModules(["MercuryJoinableMessageRenderer"],function(ja){ja.renderText(ca,da,fa);},'MercuryLogMessageRenderer');}else p(ca,fa);break;case c('MercuryLogMessageType').UNSUBSCRIBE:if(c('MessengerAdminGroupUtils').isJoinableThread(da)){v(ca,fa);}else u(ca,fa);break;case c('MercuryLogMessageType').THREAD_NAME:if(c('MessengerAdminGroupUtils').isJoinableThread(da)){w(ca,da,fa);}else x(ca,da,fa);break;case c('MercuryLogMessageType').THREAD_IMAGE:if(c('MessengerAdminGroupUtils').isJoinableThread(da)){y(ca,da,fa);}else z(ca,da,fa);break;case c('MercuryLogMessageType').WALLPAPER:aa(ca,fa);break;case c('MercuryLogMessageType').GENERIC_ADMIN_TEXT:c('Bootloader').loadModules(["MercuryXMATRenderer"],function(ja){fa(ja.renderText(ca,ea));},'MercuryLogMessageRenderer');break;default:c('Bootloader').loadModules(["MercurySpecialLogMessageRenderer"],function(ja){ja.renderText(ca,fa);},'MercuryLogMessageRenderer');break;}},renderIcon:function ba(ca){return (c('React').createElement(c('Image.react'),{className:n(ca.log_message_type,ca.log_message_data),src:k('images/spacer.gif')}));},renderLegacy:function ba(ca,da,ea,fa){n(fa.log_message_type,fa.log_message_data).split(' ').forEach(function(ga){return ga&&c('CSS').addClass(ca,ga);});this.renderText(fa,null,false,function(ga){c('ReactDOM').render(c('React').createElement('span',null,ga),da);});this.renderAttachmentLegacy(ea,fa);},renderAttachmentLegacy:function ba(ca,da){var ea;if(da.log_message_type===c('MercuryLogMessageType').THREAD_IMAGE)(function(){!da.log_message_data?j(0):void 0;var fa=da.log_message_data.image;if(fa&&fa.preview_url){c('ReactDOM').render(c('React').createElement(c('Image.react'),{className:"_z6a",onClick:function ga(){return o(fa);},src:fa.preview_url}),ca);c('CSS').show(ca);}})();}};f.exports=m;function n(ba,ca){var da=!!(ca&&ca.answered);return "_5wzu"+(ba===c('MercuryLogMessageType').SUBSCRIBE?' '+"_5wzj":'')+(ba===c('MercuryLogMessageType').UNSUBSCRIBE?' '+"_5wzk":'')+(ba===c('MercuryLogMessageType').THREAD_NAME?' '+"_5wzl":'')+(ba===c('MercuryLogMessageType').THREAD_IMAGE?' '+"_5wzm":'')+(ba===c('MercuryLogMessageType').VIDEO_CALL&&da?' '+"_5wzn":'')+(ba===c('MercuryLogMessageType').VIDEO_CALL&&!da?' '+"_5wzo":'')+(ba===c('MercuryLogMessageType').PHONE_CALL&&da?' '+"_5wzp":'')+(ba===c('MercuryLogMessageType').PHONE_CALL&&!da?' '+"_5wzq":'')+(ba===c('MercuryLogMessageType').SERVER_ERROR?' '+"_5wzr":'')+(!ba?' '+"_2r5l":'');}function o(ba){c('MercuryAttachmentViewer').bootstrapWithConfig({src:ba.preview_url,endpoint:ba.url,fbid:ba.metadata.fbid,dimensions:ba.metadata.dimensions,disablePaging:true},null);}function p(ba,ca){!ba.log_message_data?j(0):void 0;var da=c('MercuryMessageRendererUtils').moveCurrentUserToFront(ba.log_message_data.added_participants);!da?j(0):void 0;switch(da.length){case 1:q(ba,ca,da);break;case 2:r(ba,ca,da);break;case 3:s(ba,ca,da);break;default:t(ba,ca,da);break;}}function q(ba,ca,da){var ea=[ba.author,da[0]];c('MercuryParticipants').getMulti(ea,function(fa){if(ba.author===c('MercuryViewer').getID()){ca(i._("You added {subscriber1}.",[i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[da[0]]))]));}else if(da[0]===c('MercuryViewer').getID()){ca(i._("{actor} added you.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[ba.author]))]));}else ca(i._("{actor} added {subscriber1}.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[ba.author])),i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[da[0]]))]));});}function r(ba,ca,da){var ea=[ba.author].concat(da);c('MercuryParticipants').getMulti(ea,function(fa){if(ba.author===c('MercuryViewer').getID()){ca(i._("You added {subscriber1} and {subscriber2}.",[i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[da[0]])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[da[1]]))]));}else if(da[0]===c('MercuryViewer').getID()){ca(i._("{actor} added you and {subscriber2}.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[ba.author])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[da[1]]))]));}else ca(i._("{actor} added {subscriber1} and {subscriber2}.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[ba.author])),i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[da[0]])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[da[1]]))]));});}function s(ba,ca,da){var ea=[ba.author].concat(da);c('MercuryParticipants').getMulti(ea,function(fa){if(ba.author===c('MercuryViewer').getID()){ca(i._("You added {subscriber1}, {subscriber2} and {subscriber3}.",[i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[da[0]])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[da[1]])),i.param('subscriber3',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[da[2]]))]));}else if(da[0]===c('MercuryViewer').getID()){ca(i._("{actor} added you, {subscriber2} and {subscriber3}.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[ba.author])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[da[1]])),i.param('subscriber3',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[da[2]]))]));}else ca(i._("{actor} added {subscriber1}, {subscriber2} and {subscriber3}.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[ba.author])),i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[da[0]])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[da[1]])),i.param('subscriber3',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[da[2]]))]));});}function t(ba,ca,da){var ea=[ba.author].concat(da);c('MercuryParticipants').getMulti(ea,function(fa){function ga(ia){var ja=c('React').createElement('div',null,ia.map(function(ka){return c('React').createElement('div',null,ka.name);}));return (c('React').createElement(c('TooltipLink.react'),{alignH:'center',position:'above',tooltip:ja},i._({"*":"\u043e\u0449\u0435 {num}"},[i.param('num',ia.length,[0])])));}var ha=da.map(function(ia){return fa[ia];});if(ba.author===c('MercuryViewer').getID()){ca(i._("You added {subscriber1}, {subscriber2} and {more_people}.",[i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(ha[0])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(ha[1])),i.param('more_people',ga(ha.slice(2)))]));}else if(da[0]===c('MercuryViewer').getID()){ca(i._("{actor} added you, {subscriber2} and {more_people}.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[ba.author])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(ha[1])),i.param('more_people',ga(ha.slice(2)))]));}else ca(i._("{actor} added {subscriber1}, {subscriber2} and {more_people}.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(fa[ba.author])),i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(ha[0])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(ha[1])),i.param('more_people',ga(ha.slice(2)))]));});}function u(ba,ca){var da=[ba.author];!ba.log_message_data?j(0):void 0;var ea=ba.log_message_data.removed_participants;!ea?j(0):void 0;var fa=void 0;if(ea.length===1){fa=ea[0];da.push(fa);}c('MercuryParticipants').getMulti(da,function(ga){var ha=ga[ba.author],ia=ga[fa];if(ba.author===c('MercuryViewer').getID()){if(!fa||fa===ba.author){ca(i._("\u041d\u0430\u043f\u0443\u0441\u043d\u0430\u0445\u0442\u0435 \u0440\u0430\u0437\u0433\u043e\u0432\u043e\u0440\u0430."));}else ca(i._("You removed {name} from the conversation.",[i.param('name',c('MercuryMessageRendererUtils').getLinkToParticipant(ia))]));}else if(!fa||fa===ba.author){ca(i._("{actor} \u043d\u0430\u043f\u0443\u0441\u043d\u0430 \u0440\u0430\u0437\u0433\u043e\u0432\u043e\u0440\u0430.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ha))]));}else if(fa===c('MercuryViewer').getID()){ca(i._("{actor} removed you from the conversation.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ha))]));}else ca(i._("{actor} removed {name} from the conversation.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ha)),i.param('name',c('MercuryMessageRendererUtils').getLinkToParticipant(ia))]));});}function v(ba,ca){var da=[ba.author];!ba.log_message_data?j(0):void 0;var ea=ba.log_message_data.removed_participants;!ea?j(0):void 0;var fa=void 0;if(ea.length===1){fa=ea[0];da.push(fa);}c('MercuryParticipants').getMulti(da,function(ga){var ha=ga[ba.author],ia=ga[fa];if(ba.author===c('MercuryViewer').getID()){if(!fa||fa===ba.author){ca(i._("You left the room."));}else ca(i._("You removed {name} from the room.",[i.param('name',c('MercuryMessageRendererUtils').getLinkToParticipant(ia))]));}else if(!fa||fa===ba.author){ca(i._("{actor} left the room.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ha))]));}else if(fa===c('MercuryViewer').getID()){ca(i._("{actor} removed you from the room.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ha))]));}else ca(i._("{actor} removed {name} from the room.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ha)),i.param('name',c('MercuryMessageRendererUtils').getLinkToParticipant(ia))]));});}function w(ba,ca,da){!ba.log_message_data?j(0):void 0;var ea=ba.log_message_data.name,fa="_5wzs"+(c('UserAgent').isBrowser('Chrome')?' '+"_4fbd":'');if(ba.author===c('MercuryViewer').getID()){if(ea){var ga=c('React').createElement(c('TextWithEntities.react'),{renderEmoticons:true,renderEmoji:true,text:ea});if(c('MercuryConfig').MessengerNewEmojiGK)ga=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:ea});da(i._("You named the room: {name}.",[i.param('name',c('React').createElement('span',{className:fa},ga))]));}else da(i._("You removed the room name."));}else c('MercuryParticipants').get(ba.author,function(ha){var ia=c('MercuryMessageRendererUtils').getLinkToParticipant(ha,ca);if(ea){var ja=c('React').createElement(c('TextWithEntities.react'),{renderEmoticons:true,renderEmoji:true,text:ea});if(c('MercuryConfig').MessengerNewEmojiGK)ja=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:ea});da(i._("{actor} named the room: {name}.",[i.param('actor',ia),i.param('name',c('React').createElement('span',{className:fa},ja))]));}else da(i._("{actor} removed the room name.",[i.param('actor',ia)]));});}function x(ba,ca,da){!ba.log_message_data?j(0):void 0;var ea=ba.log_message_data.name,fa="_5wzs"+(c('UserAgent').isBrowser('Chrome')?' '+"_4fbd":'');if(ba.author===c('MercuryViewer').getID()){if(ea){var ga=c('React').createElement(c('TextWithEntities.react'),{renderEmoticons:true,renderEmoji:true,text:ea});if(c('MercuryConfig').MessengerNewEmojiGK)ga=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:ea});da(i._("\u041e\u0437\u0430\u0433\u043b\u0430\u0432\u0438\u0445\u0442\u0435 \u0440\u0430\u0437\u0433\u043e\u0432\u043e\u0440\u0430 \"{name}\".",[i.param('name',c('React').createElement('span',{className:fa},ga))]));}else da(i._("\u041f\u0440\u0435\u043c\u0430\u0445\u043d\u0430\u0445\u0442\u0435 \u0438\u043c\u0435\u0442\u043e \u043d\u0430 \u0440\u0430\u0437\u0433\u043e\u0432\u043e\u0440\u0430."));}else c('MercuryParticipants').get(ba.author,function(ha){var ia=c('MercuryMessageRendererUtils').getLinkToParticipant(ha,ca);if(ea){var ja=c('React').createElement(c('TextWithEntities.react'),{renderEmoticons:true,renderEmoji:true,text:ea});if(c('MercuryConfig').MessengerNewEmojiGK)ja=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:ea});da(i._("{actor} \u043e\u0437\u0430\u0433\u043b\u0430\u0432\u0438 \u0440\u0430\u0437\u0433\u043e\u0432\u043e\u0440\u0430 \u043a\u0430\u0442\u043e: {name}",[i.param('actor',ia),i.param('name',c('React').createElement('span',{className:fa},ja))]));}else da(i._("{actor} \u043f\u0440\u0435\u043c\u0430\u0445\u043d\u0430 \u0437\u0430\u0433\u043b\u0430\u0432\u0438\u0435\u0442\u043e \u043d\u0430 \u0440\u0430\u0437\u0433\u043e\u0432\u043e\u0440\u0430.",[i.param('actor',ia)]));});}function y(ba,ca,da){if(ba.author===c('MercuryViewer').getID()){!ba.log_message_data?j(0):void 0;if(ba.log_message_data.image){da(i._("You changed the room picture."));}else da(i._("You removed the room picture."));}else c('MercuryParticipants').get(ba.author,function(ea){var fa=c('MercuryMessageRendererUtils').getLinkToParticipant(ea,ca);!ba.log_message_data?j(0):void 0;if(ba.log_message_data.image){da(i._("{actor} changed the room picture.",[i.param('actor',fa)]));}else da(i._("{actor} removed the room picture.",[i.param('actor',fa)]));});}function z(ba,ca,da){if(ba.author===c('MercuryViewer').getID()){!ba.log_message_data?j(0):void 0;if(ba.log_message_data.image){da(i._("\u041f\u0440\u043e\u043c\u0435\u043d\u0438\u0445\u0442\u0435 \u0441\u043d\u0438\u043c\u043a\u0430\u0442\u0430 \u043d\u0430 \u0440\u0430\u0437\u0433\u043e\u0432\u043e\u0440\u0430."));}else da(i._("\u041f\u0440\u0435\u043c\u0430\u0445\u043d\u0430\u0445\u0442\u0435 \u0441\u043d\u0438\u043c\u043a\u0430\u0442\u0430 \u043d\u0430 \u0440\u0430\u0437\u0433\u043e\u0432\u043e\u0440\u0430."));}else c('MercuryParticipants').get(ba.author,function(ea){var fa=c('MercuryMessageRendererUtils').getLinkToParticipant(ea,ca);!ba.log_message_data?j(0):void 0;if(ba.log_message_data.image){da(i._("{actor} \u043f\u0440\u043e\u043c\u0435\u043d\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0442\u043e \u0432 \u0440\u0430\u0437\u0433\u043e\u0432\u043e\u0440\u0430.",[i.param('actor',fa)]));}else da(i._("{actor} \u043f\u0440\u0435\u043c\u0430\u0445\u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430\u0442\u0430 \u043d\u0430 \u0440\u0430\u0437\u0433\u043e\u0432\u043e\u0440\u0430.",[i.param('actor',fa)]));});}function aa(ba,ca){if(ba.author===c('MercuryViewer').getID()){ca(i._("You changed the wallpaper."));}else c('MercuryParticipants').get(ba.author,function(da){var ea=c('MercuryMessageRendererUtils').getLinkToParticipant(da);ca(i._("{actor} changed the wallpaper.",[i.param('actor',ea)]));});}}),null);
__d('MercuryMessageGroup',['MercuryActionType','MercuryAttachmentType','MercuryShareAttachmentRenderLocations','MercuryThreadlistConstants','enumerate'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={calculateMessageGroups:function k(l,m){var n=[],o=null,p={value:null},q=c('enumerate')(l),r=void 0;while(!(r=q.next()).done){var s=h.canAppendMessageToLastGroup(p.value,r.value,m);if(!s){o=[];n.push(o);}o.push(r.value);p=r;}return n;},canAppendMessageToLastGroup:function k(l,m,n){var o=c('MercuryThreadlistConstants').GROUPING_THRESHOLD;if(!l||i(l,n)||i(m,n)||l.author!=m.author||l.timestamp<m.timestamp-o||l.is_spoof_warning!==m.is_spoof_warning||l.page_admin_notes)return false;return true;}};function i(k,l){var m=k.has_attachment;if(m&&(l===c('MercuryShareAttachmentRenderLocations').MESSENGER||l===c('MercuryShareAttachmentRenderLocations').CHAT))m=j(k);return !!(k.action_type==c('MercuryActionType').LOG_MESSAGE||m||k.forward_count||k.html_body||k.body&&k.body.length>c('MercuryThreadlistConstants').MAX_CHARS_BEFORE_BREAK);}function j(k){var l=k.attachments[0];return (!l||l.attach_type===c('MercuryAttachmentType').STICKER||l.attach_type===c('MercuryAttachmentType').ANIMATED_IMAGE);}f.exports=h;}),null);
__d('getPageIDFromThreadID',['FBID','MercuryIDs'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=c('MercuryIDs').getUserIDFromThreadID(i);if(!j||c('FBID').isUser(j))return null;return j;}f.exports=h;}),null);
__d('shouldAddMRefParam',['URI','isFacebookURI'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=function i(j){if(!c('isFacebookURI')(j)||j.getFragment())return false;if(/^\/safetycheck\//.test(j.getPath()))return false;return true;};f.exports=h;}),null);
__d('MessagingFlowerCornerArrangements',['invariant','ix','Random','randomShuffle'],(function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={TOP_LEFT:'topLeft',BOTTOM_RIGHT:'bottomRight'},k={PINK:'pink',PURPLE:'purple',YELLOW:'yellow'},l={ROUND:'round',POINTY:'pointy'},m=-10;function n(r,s){this.$ElementProducer1=r;this.$ElementProducer4=s;this.$ElementProducer2=c('Random').random()<.5;this.$ElementProducer3=[];var t=[k.PINK,k.PURPLE,k.YELLOW],u=[l.ROUND,l.POINTY,c('Random').random()>=.5?l.ROUND:l.POINTY];c('randomShuffle')(t);c('randomShuffle')(u);for(var v=0;v<3;v++)this.$ElementProducer3.push(this.$ElementProducer5(t[v],u[v]));}n.prototype.$ElementProducer6=function(r){switch(r){case k.PINK:return i('/images/messaging/flowerborder/pinkPointyFlower.png');case k.PURPLE:return i('/images/messaging/flowerborder/purplePointyFlower.png');case k.YELLOW:default:return i('/images/messaging/flowerborder/yellowPointyFlower.png');}};n.prototype.$ElementProducer7=function(r){switch(r){case k.PINK:return i('/images/messaging/flowerborder/pinkRoundFlower.png');case k.PURPLE:return i('/images/messaging/flowerborder/purpleRoundFlower.png');case k.YELLOW:default:return i('/images/messaging/flowerborder/yellowRoundFlower.png');}};n.prototype.$ElementProducer5=function(r,s){return s===l.POINTY?this.$ElementProducer6(r):this.$ElementProducer7(r);};n.prototype.$ElementProducer8=function(){return this.$ElementProducer3.pop();};n.prototype.flower=function(r){var s=c('Random').random()*360;return this.$ElementProducer9(this.$ElementProducer8(),{pivot:.5,rotationStart:s+r.rotationStartOffset,rotationEnd:s,scale:r.scale,x:r.x,y:r.y});};n.prototype.leaf=function(r){return this.$ElementProducer9(i('images/messaging/flowerborder/leaf.png'),{pivot:1,rotationStart:0,rotationEnd:r.rotationEnd,scale:r.scale,x:r.x,y:r.y});};n.prototype.$ElementProducer9=function(r,s){var t=s.pivot*100+'%',u=s.x+m,v=s.y+m,w=-s.pivot*100,x=s.scale,y=s.rotationEnd,z=void 0,aa=void 0,ba=void 0,ca=void 0;if(this.$ElementProducer2){var da=u;u=v;v=da;y=-y;}if(this.$ElementProducer1===j.BOTTOM_RIGHT){ca=this.$ElementProducer4+u+'px';aa=this.$ElementProducer4+v+'px';w=100+w;y+=180;}else if(this.$ElementProducer1===j.TOP_LEFT){ba=this.$ElementProducer4+u+'px';z=this.$ElementProducer4+v+'px';}else h(0);var ea=[];if(w!==0)ea.push('translate('+w+'%, '+w+'%)');ea.push('scale('+x+')');if(y!==0)ea.push('rotate('+y+'deg)');return {style:{bottom:aa,left:ba,position:'absolute',right:ca,top:z,transform:ea.join(' '),transformOrigin:t+' '+t},image:r};};function o(r){return [r.leaf({x:20.5,y:38,scale:.225,rotationEnd:-80}),r.leaf({x:29,y:22.5,scale:.35,rotationEnd:35}),r.flower({x:31.5,y:22,scale:.6,rotationStartOffset:-70}),r.flower({x:21,y:35,scale:.65,rotationStartOffset:-70}),r.flower({x:21.75,y:24.75,scale:1,rotationStartOffset:50})];}function p(r){return [r.leaf({x:22.25,y:35.25,scale:.225,rotationEnd:-115}),r.leaf({x:35,y:24,scale:.35,rotationEnd:110}),r.flower({x:21.5,y:32.5,scale:.68,rotationStartOffset:-60}),r.flower({x:21.5,y:23.5,scale:.67,rotationStartOffset:-70}),r.flower({x:31,y:21,scale:.95,rotationStartOffset:50})];}function q(r,s){var t=new n(r,s);return c('Random').random()<.5?o(t):p(t);}f.exports={createFlowers:q,corners:j};}),null);
__d('MessagingFlowerBorder.react',['Image.react','MessagingFlowerCornerArrangements','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MessagingFlowerBorder1=function(){return c('MessagingFlowerCornerArrangements').createFlowers(c('MessagingFlowerCornerArrangements').corners.TOP_LEFT,this.props.offset).concat(c('MessagingFlowerCornerArrangements').createFlowers(c('MessagingFlowerCornerArrangements').corners.BOTTOM_RIGHT,this.props.offset));}.bind(this),this.state={elements:this.$MessagingFlowerBorder1()},m;}k.prototype.render=function(){return (c('React').createElement('div',null,this.state.elements.map(function(l,m){return c('React').createElement(c('Image.react'),{key:m,style:l.style,src:l.image});})));};k.propTypes={ChildClass:j.number};k.defaultProps={offset:0};f.exports=k;}),null);
__d('MessagingGiftWrap.react',['cx','CurrentEnvironment','React','emptyFunction'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={unwrapped:false},this.$MessagingGiftWrap1=function(r){r.stopPropagation();this.setState({unwrapped:true});this.props.onUnwrap&&this.props.onUnwrap();}.bind(this),n;}l.prototype.render=function(){var m=c('CurrentEnvironment').messengerdotcom;return c('React').createElement('div',{className:"_4p0m"+(this.state.unwrapped?' '+"_4p0o":'')+(m?' '+"_mxz":'')+(m?' '+"_4br2":'')+(!m?' '+"_3_om":'')+(this.props.isSticker?' '+"_52vq":''),onClick:this.$MessagingGiftWrap1},c('React').createElement('div',{className:"_4p0r"}),c('React').createElement('div',{className:"_4p0s _4p0t"}),c('React').createElement('div',{className:"_4p0s _4p0u"}));};l.propTypes={isSticker:k.bool,onUnwrap:k.func};l.defaultProps={onUnwrap:c('emptyFunction')};f.exports=l;}),null);
__d('EmployeeLinkMatcher',['CurrentUser'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=new RegExp('^[\\s.,:]'),i=new RegExp('(?:\\b)([BDTPSX]\\d{4,})(?:\\b)','im'),j=new RegExp('(?:\\b)(designpack:\/\/.+)(?:\\b)','im'),k=function n(o){if(!c('CurrentUser').isEmployee())return null;var p=i.exec(o)||j.exec(o);if(p===null)return null;return {lnk:p[1],idx:p.index+(h.exec(p[0])?1:0)};},l=function n(o){var p=c('CurrentUser').isEmployee()&&(i.exec(o)!==null||j.exec(o)!==null);return p;},m={match:k,isMatch:l};f.exports=m;}),null);
__d('EmployeeLinkRanges',['EmployeeLinkMatcher'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={PHABRICATOR_PREFIX:'https://phabricator.intern.facebook.com/',TASKS_PREFIX:'https://our.intern.facebook.com/intern/tasks/?t=',BUSINESS_PREFIX:'https://our.intern.facebook.com/intern/business/?q=',SEV_PREFIX:'https://our.intern.facebook.com/intern/sevmanager/view/s/',CHRONOS_PREFIX:'https://our.intern.facebook.com/intern/chronos/lucky/?query=',get:function i(j){var k=arguments.length<=1||arguments[1]===undefined?0:arguments[1],l=j.substr(k),m=c('EmployeeLinkMatcher').match(l);if(!m)return [];var n=m.lnk;k+=m.idx;var o='';switch(n[0].toLowerCase()){case 'd':if(n.indexOf('designpack://')===0){o=n;}else o=this.PHABRICATOR_PREFIX+n.toUpperCase();break;case 'p':o=this.PHABRICATOR_PREFIX+n.toUpperCase();break;case 't':o=this.TASKS_PREFIX+n.substr(1);break;case 'b':o=this.BUSINESS_PREFIX+n.substr(1);break;case 's':o=this.SEV_PREFIX+n.substr(1);break;case 'x':o=this.CHRONOS_PREFIX+n.substr(1);break;default:return [];}var p=n.length,q=[{offset:k,length:p,entity:{url:o}}];return q.concat(this.get(j,k+p));}};f.exports=h;}),null);
__d('P2PAbstractSendMoneyButton.react',['cx','fbt','React','TooltipLink.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$P2PAbstractSendMoneyButton1=false,this.getButton=function(){if(this.props.button)return this.props.button;return c('React').createElement('i',{className:"_5s8l"});}.bind(this),this.$P2PAbstractSendMoneyButton4=function(){if(this.props.isDisabled)return null;return i._("Send Money");}.bind(this),this.$P2PAbstractSendMoneyButton3=function(){this.props.onMouseDown&&this.props.onMouseDown();this.$P2PAbstractSendMoneyButton1=this.props.isActive;}.bind(this),this.$P2PAbstractSendMoneyButton2=function(s){s.stopPropagation();if(this.$P2PAbstractSendMoneyButton1){this.$P2PAbstractSendMoneyButton1=false;return;}this.props.onClick();}.bind(this),o;}m.prototype.render=function(){return c('React').createElement(c('TooltipLink.react'),{alignH:'center',className:c('joinClasses')(this.props.className,(this.props.isActive?"open":'')+(this.props.isDisabled?' '+"disabled":'')+(this.props.isActive?' '+"_10gz":'')+(this.props.isDisabled?' '+"_10g-":'')+(!this.props.isMessenger&&!this.props.className?' '+"_5uqy":'')+(this.props.isMessenger?' '+"_3ggc":'')),href:'#',onClick:this.$P2PAbstractSendMoneyButton2,onMouseDown:this.$P2PAbstractSendMoneyButton3,onMouseOver:this.props.onMouseOver,position:'above',role:'button',title:this.$P2PAbstractSendMoneyButton4()},this.getButton());};m.propTypes={button:l.object,isActive:l.bool.isRequired,isDisabled:l.bool,isMessenger:l.bool.isRequired,onClick:l.func.isRequired,onMouseOver:l.func,recipientName:l.string};f.exports=m;}),null);
__d('P2PSendMoneyContainerBootloader.react',['cx','Bootloader','CurrentEnvironment','DeferredComponent.react','MercuryIDs','P2PAbstractSendMoneyButton.react','P2PActions','P2PLoadingMask.react','P2PLogger','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PSendMoneyDialogStore','React','ReactLayeredComponentMixin_DEPRECATED','Run','XUIContextualDialog.react','emptyFunction','getPageIDFromThreadID'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('CurrentEnvironment').messengerdotcom,k=j?282:260,l=c('React').createClass({displayName:'P2PSendMoneyContainerBootloader',propTypes:{button:i.node,className:i.string,ContextualDialog:i.func,flyoutAlignment:i.string,onTrigger:i.func,participantIDs:i.array,referrer:i.string,threadID:i.string},getInitialState:function m(){return {showPlaceholderDialog:false,shouldBootloadImmediately:c('P2PSendMoneyDialogStore').isAnyChatSendViewOpen()};},mixins:[c('ReactLayeredComponentMixin_DEPRECATED')],_clicked:false,_onComponentLoad:c('emptyFunction'),_bootloadCalled:false,_sendMoneyDialogStoreSub:null,log:function m(n,o){c('P2PLogger').log(n,babelHelpers['extends']({www_event_referrer:this.props.referrer,www_event_flow:c('P2PPaymentLoggerEventFlow').UI_FLOW_P2P_SEND},o));},componentWillMount:function m(){if(this.state.shouldBootloadImmediately){this._bootloadComponentNow();}else this._sendMoneyDialogStoreSub=c('P2PSendMoneyDialogStore').addListener('change',this.onDialogStoreChange);},componentWillUnmount:function m(){this.removeDialogStoreSub();},onDialogStoreChange:function m(){this._bootloadComponentNow();this.removeDialogStoreSub();},removeDialogStoreSub:function m(){if(this._sendMoneyDialogStoreSub){this._sendMoneyDialogStoreSub.remove();this._sendMoneyDialogStoreSub=null;}},onPlaceholderClick:function m(){var n=this.props.threadID?c('MercuryIDs').tokenize(this.props.threadID).value:null;this._handleDialogVisibility(!this.state.showPlaceholderDialog);this.log(c('P2PPaymentLoggerEvent').UI_ACTN_SEND_MONEY_BUTTON_PLACEHOLDER_CLICKED,{object_id:n});this._bootloadComponentNow();this._clicked=false;},_handleDialogVisibility:function m(n){if(!n){c('P2PActions').chatSendViewClosed({threadID:this.props.threadID});}else c('P2PActions').chatSendViewOpened({referrer:this.props.referrer,threadID:this.props.threadID});this.setState({showPlaceholderDialog:n});},renderLayers:function m(){var n={};if(this.state.showPlaceholderDialog){var o=this.props.ContextualDialog||c('XUIContextualDialog.react');n.placeholderDialog=c('React').createElement(o,{alignment:this.props.flyoutAlignment?this.props.flyoutAlignment:j?'right':'left',contextRef:function(){return this.refs.placeholderButton;}.bind(this),onBlur:function(){if(!this._clicked)this._handleDialogVisibility(false);this._clicked=false;}.bind(this),ref:'dialog',shown:true,width:k,position:'above'},c('React').createElement('div',{className:"_c_5"},c('React').createElement(c('P2PLoadingMask.react'),{visible:true})));}return n;},render:function m(){if(this._isPageChat())return null;return (c('React').createElement(c('DeferredComponent.react'),babelHelpers['extends']({deferredComponent:this._bootloadComponent,deferredPlaceholder:this._renderPlaceholder()},this.props)));},_renderPlaceholder:function m(){return (c('React').createElement(c('P2PAbstractSendMoneyButton.react'),{button:this.props.button,className:this.props.className,isActive:false,isDisabled:false,isMessenger:j,onClick:this.onPlaceholderClick,onMouseDown:function(){return this._clicked=true;}.bind(this),onMouseOver:this._bootloadComponentNow,ref:'placeholderButton'}));},_bootloadComponent:function m(n){this._onComponentLoad=n.bind(this);},_bootloadComponentNow:function m(){if(this._bootloadCalled)return;this._bootloadCalled=true;c('Bootloader').loadModules(["P2PSendMoneyContainer.react"],function(n){this.removeDialogStoreSub();this._onComponentLoad(n);this.setState({showPlaceholderDialog:false});}.bind(this),'P2PSendMoneyContainerBootloader.react');},_isPageChat:function m(){return !!this._getPageID();},_getPageID:function m(){return c('getPageIDFromThreadID')(this.props.threadID);}});f.exports=l;}),null);
__d('StickersDispatcher',['ExplicitRegistrationDispatcher'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=new (c('ExplicitRegistrationDispatcher'))({strict:false});}),null);
__d('StickersActions',['StickersDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('keyMirror')({ADD_RECENT_STICKER:null,HIDE_FLYOUT:null,LOAD_RECENT_STICKERS:null,SELECT_STORE_PACK:null,SELECT_TRAY_PACK:null,SHOW_FLYOUT:null,TRAY_LOADED:null}),i={Types:h,addRecentSticker:function j(k){c('StickersDispatcher').dispatch({type:h.ADD_RECENT_STICKER,sticker:k});},hideStickerFlyout:function j(){c('StickersDispatcher').dispatch({type:h.HIDE_FLYOUT});},loadRecentStickers:function j(k){c('StickersDispatcher').dispatch({type:h.LOAD_RECENT_STICKERS,stickers:k});},selectStorePack:function j(k){c('StickersDispatcher').dispatch({type:h.SELECT_STORE_PACK,packID:k});},selectTrayPack:function j(k){c('StickersDispatcher').dispatch({type:h.SELECT_TRAY_PACK,packID:k});},showStickerFlyout:function j(k){c('StickersDispatcher').dispatch({type:h.SHOW_FLYOUT,threadID:k});},trayLoaded:function j(){c('StickersDispatcher').dispatch({type:h.TRAY_LOADED});}};f.exports=i;}),null);
__d('StickersStateStore',['FluxReduceStore','immutable','PresenceState','StickersActions','StickersConfig','StickersDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){var k=c('PresenceState').get();return new (c('immutable').Map)({recentStickers:[],recentStickersLoaded:false,showFlyout:false,storePackID:null,threadID:null,trayLoaded:false,trayPackID:k?k.tray_pack_id:null});};j.prototype.reduce=function(k,l){var m=l,n=c('StickersActions').Types;switch(m.type){case n.ADD_RECENT_STICKER:var o=[m.sticker];k.get('recentStickers').forEach(function(p){if(p.id===m.sticker.id)return;o.push(p);});return k.set('recentStickers',o.splice(0,c('StickersConfig').max_mru_stickers));case n.HIDE_FLYOUT:return k.set('showFlyout',false);case n.LOAD_RECENT_STICKERS:return k.set('recentStickersLoaded',true).set('recentStickers',m.stickers);case n.SELECT_STORE_PACK:return k.set('storePackID',m.packID);case n.SELECT_TRAY_PACK:return k.set('trayPackID',m.packID).set('trayLoaded',true);case n.SHOW_FLYOUT:return k.set('showFlyout',true).set('threadID',m.threadID);case n.TRAY_LOADED:return k.set('trayLoaded',true);default:return k;}};function j(){h.apply(this,arguments);}f.exports=new j(c('StickersDispatcher'));}),null);